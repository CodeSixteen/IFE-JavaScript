<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>转盘抽奖</title>
    <script src="./js/jquery.min.js"></script>
    <script src="./js/awardRotate.js"></script>
    <link rel="stylesheet" href="./css/demo.css">
</head>

<body>
    <div>
        <div class="turntable-bg">
            <img id="rotate" src="./img/turntable2.png" alt="turntable">
            <div class="pointer"><img src="./img/pointer.png" alt="pointer"></div>
        </div>
    </div>
    <script type="text/javascript">
        $(function () {
            var bRotate = false;
            function rotateFn(awards, angles, txt) {
                bRotate = !bRotate;
                $('#rotate').stopRotate();
                $('#rotate').rotate({
                    angle: 0,
                    animateTo: angles + 1800,
                    duration: 3000,
                    callback: function () {
                        alert(txt);
                        bRotate = !bRotate;
                    }
                })
            };
            $('.pointer').click(function () {
                if (bRotate) return;
                var item = rnd(3, 7);
                switch (item) {
                    case 0:
                        rotateFn(0, 335, '未中奖');
                        break;
                    case 1:
                        rotateFn(1, 28, '一等奖');
                        break;
                    case 2:
                        rotateFn(2, 88, '二等奖');
                        break;
                    case 3:
                        rotateFn(3, 137, '三等奖');
                        break;
                    case 4:
                        rotateFn(4, 185, '四等奖');
                        break;
                    case 5:
                        rotateFn(5, 235, '五等奖');
                        break;
                    case 6:
                        rotateFn(6, 287, '安慰奖');
                        break;
                }
                console.log(item);
            });
        });
        function rnd(n, m) {
            return Math.floor(Math.random() * (m - n + 1) + n)
        }
    </script>
</body>

</html>